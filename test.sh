#!/bin/bash
assert() {
  expected="$1"
  input="$2"

  ./9cc "$input" > tmp.s
  gcc -o tmp tmp.s
  ./tmp
  actual="$?"

  if [ "$actual" = "$expected" ]; then
    echo "$input => $actual"
  else
    echo "$input => $expected expected, but got $actual"
    exit 1
  fi
}

assert 10  './test/test92.c'
assert 6 './test/test91.c'
assert 0  './test/test90.c'
assert 7  './test/test89.c'
assert 0  './test/test88.c'
assert 1  './test/test87.c'
assert 2  './test/test86.c'
assert 3  './test/test85.c'
assert 4  './test/test84.c'
assert 16 './test/test83.c'
assert 23 './test/test82.c'
assert 46 './test/test81.c'
assert 30 './test/test80.c'
assert 4  './test/test79.c'
assert 3  './test/test78.c'
assert 20 './test/test77.c'
assert 3  './test/test76.c'
assert 4  './test/test75.c'
assert 8  './test/test74.c'
assert 4  './test/test73.c'
assert 8  './test/test72.c'
assert 4  './test/test71.c'
assert 4 './test/test70.c'
assert 1  './test/test69.c'
assert 1  './test/test68.c'
assert 73 './test/test67.c'
assert 32 './test/test66.c'
assert 7  './test/test65.c'
assert 5  './test/test64.c'
assert 3  './test/test63.c'
assert 3  './test/test62.c'
assert 0  './test/test61.c'
assert 3  './test/test60.c'
assert 5  './test/test59.c'
assert 3  './test/test58.c'
assert 3  './test/test57.c'
assert 3  './test/test56.c'
assert 34 './test/test55.c'
assert 5  './test/test54.c'
assert 10 './test/test53.c'
assert 5  './test/test52.c'
assert 11 './test/test51.c'
assert 0  './test/test50.c'
assert 60   './test/test49.c'
assert 15  './test/test48.c'
assert 5  './test/test47.c'
assert 6  './test/test46.c'
assert 5  './test/test45.c'
assert 2  './test/test44.c'
assert 3  './test/test43.c'
assert 1  './test/test42.c'
assert 0  './test/test41.c'
assert 0  './test/test40.c'
assert 42   './test/test39.c'
assert 21  './test/test38.c'
assert 41  './test/test37.c'
assert 47  './test/test36.c'
assert 15  './test/test35.c'
assert 4  './test/test34.c'
assert 10  './test/test33.c'
assert 10  './test/test32.c'
assert 10  './test/test31.c'
assert 10  './test/test30.c'
assert 10  './test/test29.c'
assert 10  './test/test28.c'
assert 10   './test/test27.c'
assert 0  './test/test26.c'
assert 1  './test/test25.c'
assert 1  './test/test24.c'
assert 0  './test/test23.c'
assert 1  './test/test22.c'
assert 0  './test/test21.c'
assert 0  './test/test20.c'
assert 1  './test/test19.c'
assert 1  './test/test18.c'
assert 0  './test/test17.c'
assert 1  './test/test16.c'
assert 0  './test/test15.c'
assert 0  './test/test14.c'
assert 1  './test/test13.c'
assert 1  './test/test12.c'
assert 0  './test/test11.c'
assert 3  './test/test10.c'
assert 8  './test/test9.c'
assert 3 './test/test8.c'
assert 8  './test/test7.c'
assert 6  './test/test6.c'
assert 3  './test/test5.c'
assert 8  './test/test4.c'
assert 1  './test/test3.c'
assert 2  './test/test2.c'
assert 3  './test/test1.c'
